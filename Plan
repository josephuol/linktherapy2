Comprehensive E2E Testing Plan
This plan establishes a robust End-to-End (E2E) testing framework using Playwright to cover the entire Client, Admin, and Therapist workflows, including payments. It also involves cleaning up existing ad-hoc test scripts to maintain a clean codebase.

User Review Required
IMPORTANT

Ad-hoc Script Deletion: This plan involves deleting multiple existing 
.js
 and 
.mjs
 script files in the root and scripts/ directory that were used for manual/partial testing. Please confirm if any of these scripts should be preserved.

Proposed Changes
1. Test Framework Setup
[NEW] 
playwright.config.ts
Configure Playwright for the Next.js application.
Set up base URL, timeouts, and browser projects (Chromium, Firefox, WebKit).
Configure webServer to start the Next.js dev server during tests.
[MODIFY] 
package.json
Add @playwright/test to devDependencies.
Add test:e2e and test:e2e:ui scripts.
2. Client Workflow Tests
[NEW] 
tests/e2e/client-flow.spec.ts
Landing Page: Verify critical elements (CTA buttons, hero section).
Authentication: Test Sign Up and Login flows (Supabase Auth).
Onboarding: Complete the client onboarding questionnaire/profile setup.
Booking: Simulate searching for a therapist and booking a session.
Dashboard: Verify the client dashboard loads correct information after login.
3. Therapist Workflow Tests
[NEW] 
tests/e2e/therapist-flow.spec.ts
Invitation Acceptance: Simulate clicking an invite link (mocking the token flow).
Profile Setup: Complete the therapist profile (specialties, bio, etc.).
Availability: Test the "Manage Schedule" interface (adding/removing slots).
Dashboard: Verify upcoming appointments and client list visibility.
Notes: Create and save session notes.
4. Admin Dashboard & Payments Tests
[NEW] 
tests/e2e/admin-flow.spec.ts
Access Control: Verify non-admins cannot access admin routes.
User Management: Admin can view, search, and manage users (clients/therapists).
Payments (Mocked):
Simulate Stripe subscription status changes.
Verify payment records appear in the transaction history.
Test invoice generation/viewing.
5. Cleanup Existing Tests
[DELETE] Root Scripts
test-emails-direct.js
test-payment-notifications.ts
test-qstash-scheduling.js
test-webhooks.sh
[DELETE] scripts/ Directory
scripts/check-therapist.mjs
scripts/cleanup-christi.mjs
scripts/diagnose-commissions.mjs
scripts/fix-invite-constraint.mjs
scripts/run-db-fix.mjs
scripts/run-migration-simple.mjs
scripts/run-migration.mjs
scripts/test-db-state.mjs
scripts/test-full-flow.mjs
scripts/test-invite.mjs
scripts/test-qstash.mjs
scripts/verify-db.mjs
[DELETE] Test Endpoints
app/api/admin/payments/create-test/
app/api/admin/payments/delete-test/
Verification Plan
Automated Tests
Run npm run test:e2e to execute the full Playwright suite.
Verify all tests pass in a headless environment.
Use npm run test:e2e:ui to visually debug if needed.
